{"ast":null,"code":"import { db, storage } from \"../../firebase/firebaseConfig\";\nimport { types } from \"../../types/types\";\nexport const saveFile = async file => {\n  const uploadTask = storage.ref(`envios_evidencia/${Date.now() + \"-\" + file.name}`);\n  await uploadTask.put(file);\n  const urlImg = await uploadTask.getDownloadURL();\n  return urlImg;\n};\nexport const saveCheckout = ({\n  notas,\n  direccion,\n  total,\n  urlImg,\n  viaje,\n  auth\n}) => {\n  const id_envio = `${viaje.origen.substr(0, 4)}${viaje.destino.substr(0, 4)}${Date.now()}`;\n  const peso = viaje.equipajePeso - viaje.peso_envio;\n  const body = {\n    notas,\n    direccion,\n    total,\n    urlImg,\n    id_cliente: auth.uid,\n    nombre_cliente: auth.name,\n    id_viajero: viaje.viajeroID\n  };\n  updateViaje(viaje.id, peso);\n  setEnvioViaje(id_envio, body);\n};\n\nconst updateViaje = (id, peso) => {\n  return db.collection(\"viajes\").doc(id).update({\n    equipajePeso: peso\n  });\n};\n\nconst setEnvioViaje = (id, body) => {\n  return db.collection(\"envios\").doc(id).set(body);\n};","map":{"version":3,"sources":["/Users/adrian/Desktop/mandadero/app/src/actions/mandadero/checkout.js"],"names":["db","storage","types","saveFile","file","uploadTask","ref","Date","now","name","put","urlImg","getDownloadURL","saveCheckout","notas","direccion","total","viaje","auth","id_envio","origen","substr","destino","peso","equipajePeso","peso_envio","body","id_cliente","uid","nombre_cliente","id_viajero","viajeroID","updateViaje","id","setEnvioViaje","collection","doc","update","set"],"mappings":"AAAA,SAASA,EAAT,EAAaC,OAAb,QAA4B,+BAA5B;AACA,SAASC,KAAT,QAAsB,mBAAtB;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAOC,IAAP,IAAgB;AACtC,QAAMC,UAAU,GAAGJ,OAAO,CAACK,GAAR,CAChB,oBAAmBC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBJ,IAAI,CAACK,IAAK,EADhC,CAAnB;AAGA,QAAMJ,UAAU,CAACK,GAAX,CAAeN,IAAf,CAAN;AACA,QAAMO,MAAM,GAAG,MAAMN,UAAU,CAACO,cAAX,EAArB;AACA,SAAOD,MAAP;AACD,CAPM;AASP,OAAO,MAAME,YAAY,GAAG,CAAC;AAC3BC,EAAAA,KAD2B;AAE3BC,EAAAA,SAF2B;AAG3BC,EAAAA,KAH2B;AAI3BL,EAAAA,MAJ2B;AAK3BM,EAAAA,KAL2B;AAM3BC,EAAAA;AAN2B,CAAD,KAOtB;AACJ,QAAMC,QAAQ,GAAI,GAAEF,KAAK,CAACG,MAAN,CAAaC,MAAb,CAAoB,CAApB,EAAuB,CAAvB,CAA0B,GAAEJ,KAAK,CAACK,OAAN,CAAcD,MAAd,CAC9C,CAD8C,EAE9C,CAF8C,CAG9C,GAAEd,IAAI,CAACC,GAAL,EAAW,EAHf;AAKA,QAAMe,IAAI,GAAGN,KAAK,CAACO,YAAN,GAAqBP,KAAK,CAACQ,UAAxC;AAEA,QAAMC,IAAI,GAAG;AACXZ,IAAAA,KADW;AAEXC,IAAAA,SAFW;AAGXC,IAAAA,KAHW;AAIXL,IAAAA,MAJW;AAKXgB,IAAAA,UAAU,EAAET,IAAI,CAACU,GALN;AAMXC,IAAAA,cAAc,EAAEX,IAAI,CAACT,IANV;AAOXqB,IAAAA,UAAU,EAAEb,KAAK,CAACc;AAPP,GAAb;AAUAC,EAAAA,WAAW,CAACf,KAAK,CAACgB,EAAP,EAAWV,IAAX,CAAX;AACAW,EAAAA,aAAa,CAACf,QAAD,EAAWO,IAAX,CAAb;AACD,CA3BM;;AA6BP,MAAMM,WAAW,GAAG,CAACC,EAAD,EAAKV,IAAL,KAAc;AAChC,SAAOvB,EAAE,CAACmC,UAAH,CAAc,QAAd,EAAwBC,GAAxB,CAA4BH,EAA5B,EAAgCI,MAAhC,CAAuC;AAAEb,IAAAA,YAAY,EAAED;AAAhB,GAAvC,CAAP;AACD,CAFD;;AAIA,MAAMW,aAAa,GAAG,CAACD,EAAD,EAAKP,IAAL,KAAc;AAClC,SAAO1B,EAAE,CAACmC,UAAH,CAAc,QAAd,EAAwBC,GAAxB,CAA4BH,EAA5B,EAAgCK,GAAhC,CAAoCZ,IAApC,CAAP;AACD,CAFD","sourcesContent":["import { db, storage } from \"../../firebase/firebaseConfig\";\nimport { types } from \"../../types/types\";\n\nexport const saveFile = async (file) => {\n  const uploadTask = storage.ref(\n    `envios_evidencia/${Date.now() + \"-\" + file.name}`\n  );\n  await uploadTask.put(file);\n  const urlImg = await uploadTask.getDownloadURL();\n  return urlImg;\n};\n\nexport const saveCheckout = ({\n  notas,\n  direccion,\n  total,\n  urlImg,\n  viaje,\n  auth,\n}) => {\n  const id_envio = `${viaje.origen.substr(0, 4)}${viaje.destino.substr(\n    0,\n    4\n  )}${Date.now()}`;\n\n  const peso = viaje.equipajePeso - viaje.peso_envio;\n\n  const body = {\n    notas,\n    direccion,\n    total,\n    urlImg,\n    id_cliente: auth.uid,\n    nombre_cliente: auth.name,\n    id_viajero: viaje.viajeroID,\n  };\n\n  updateViaje(viaje.id, peso);\n  setEnvioViaje(id_envio, body);\n};\n\nconst updateViaje = (id, peso) => {\n  return db.collection(\"viajes\").doc(id).update({ equipajePeso: peso });\n};\n\nconst setEnvioViaje = (id, body) => {\n  return db.collection(\"envios\").doc(id).set(body);\n};\n"]},"metadata":{},"sourceType":"module"}