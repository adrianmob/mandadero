{"ast":null,"code":"import { db } from \"../../firebase/firebaseConfig\";\nexport const getViaje = ({\n  dirSalida,\n  dirDestino,\n  fechaEnvio,\n  pesoPaquete\n}) => {\n  const viajesRef = db.collection(\"viajes\");\n  viajesRef.where(\"salida\", \"==\", dirSalida).where(\"destino\", \"==\", dirDestino).where(\"fechaViaje\", \"==\", fechaEnvio).where(\"equipajePeso\", \">=\", pesoPaquete).get().then(viajes => {\n    console.log(viajes);\n\n    if (!viajes.empty) {\n      viajes.docs.forEach(async viaje => {\n        const equipajePeso = viaje.data()[\"equipajePeso\"] - pesoPaquete;\n        const idViaje = viaje.id;\n        await updateViaje(idViaje, equipajePeso);\n        await setEnvioViaje({\n          pesoPaquete,\n          idViaje\n        });\n      });\n    }\n  });\n};\n\nconst updateViaje = (id, peso) => {\n  return db.collection(\"viajes\").doc(id).update({\n    equipajePeso: peso\n  });\n};\n\nconst setEnvioViaje = body => {\n  return db.collection(\"envios\").doc().set(body);\n};","map":{"version":3,"sources":["/Users/adrian/Desktop/mandadero/src/actions/mandadero/envio.js"],"names":["db","getViaje","dirSalida","dirDestino","fechaEnvio","pesoPaquete","viajesRef","collection","where","get","then","viajes","console","log","empty","docs","forEach","viaje","equipajePeso","data","idViaje","id","updateViaje","setEnvioViaje","peso","doc","update","body","set"],"mappings":"AAAA,SAASA,EAAT,QAAmB,+BAAnB;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAAC;AACvBC,EAAAA,SADuB;AAEvBC,EAAAA,UAFuB;AAGvBC,EAAAA,UAHuB;AAIvBC,EAAAA;AAJuB,CAAD,KAKlB;AACJ,QAAMC,SAAS,GAAGN,EAAE,CAACO,UAAH,CAAc,QAAd,CAAlB;AACAD,EAAAA,SAAS,CACNE,KADH,CACS,QADT,EACmB,IADnB,EACyBN,SADzB,EAEGM,KAFH,CAES,SAFT,EAEoB,IAFpB,EAE0BL,UAF1B,EAGGK,KAHH,CAGS,YAHT,EAGuB,IAHvB,EAG6BJ,UAH7B,EAIGI,KAJH,CAIS,cAJT,EAIyB,IAJzB,EAI+BH,WAJ/B,EAKGI,GALH,GAMGC,IANH,CAMSC,MAAD,IAAY;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AAEA,QAAI,CAACA,MAAM,CAACG,KAAZ,EAAmB;AACjBH,MAAAA,MAAM,CAACI,IAAP,CAAYC,OAAZ,CAAoB,MAAOC,KAAP,IAAiB;AACnC,cAAMC,YAAY,GAAGD,KAAK,CAACE,IAAN,GAAa,cAAb,IAA+Bd,WAApD;AACA,cAAMe,OAAO,GAAGH,KAAK,CAACI,EAAtB;AACA,cAAMC,WAAW,CAACF,OAAD,EAAUF,YAAV,CAAjB;AACA,cAAMK,aAAa,CAAC;AAAElB,UAAAA,WAAF;AAAee,UAAAA;AAAf,SAAD,CAAnB;AACD,OALD;AAMD;AACF,GAjBH;AAkBD,CAzBM;;AA2BP,MAAME,WAAW,GAAG,CAACD,EAAD,EAAKG,IAAL,KAAc;AAChC,SAAOxB,EAAE,CAACO,UAAH,CAAc,QAAd,EAAwBkB,GAAxB,CAA4BJ,EAA5B,EAAgCK,MAAhC,CAAuC;AAAER,IAAAA,YAAY,EAAEM;AAAhB,GAAvC,CAAP;AACD,CAFD;;AAIA,MAAMD,aAAa,GAAII,IAAD,IAAU;AAC9B,SAAO3B,EAAE,CAACO,UAAH,CAAc,QAAd,EAAwBkB,GAAxB,GAA8BG,GAA9B,CAAkCD,IAAlC,CAAP;AACD,CAFD","sourcesContent":["import { db } from \"../../firebase/firebaseConfig\";\n\nexport const getViaje = ({\n  dirSalida,\n  dirDestino,\n  fechaEnvio,\n  pesoPaquete,\n}) => {\n  const viajesRef = db.collection(\"viajes\");\n  viajesRef\n    .where(\"salida\", \"==\", dirSalida)\n    .where(\"destino\", \"==\", dirDestino)\n    .where(\"fechaViaje\", \"==\", fechaEnvio)\n    .where(\"equipajePeso\", \">=\", pesoPaquete)\n    .get()\n    .then((viajes) => {\n      console.log(viajes);\n\n      if (!viajes.empty) {\n        viajes.docs.forEach(async (viaje) => {\n          const equipajePeso = viaje.data()[\"equipajePeso\"] - pesoPaquete;\n          const idViaje = viaje.id;\n          await updateViaje(idViaje, equipajePeso);\n          await setEnvioViaje({ pesoPaquete, idViaje });\n        });\n      }\n    });\n};\n\nconst updateViaje = (id, peso) => {\n  return db.collection(\"viajes\").doc(id).update({ equipajePeso: peso });\n};\n\nconst setEnvioViaje = (body) => {\n  return db.collection(\"envios\").doc().set(body);\n};\n"]},"metadata":{},"sourceType":"module"}